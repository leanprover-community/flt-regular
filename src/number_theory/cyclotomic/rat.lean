import number_theory.cyclotomic.galois_action_on_cyclo

universes u

open finite_dimensional

variables (L : Type u) [field L] [char_zero L]

namespace is_cyclotomic_extension

namespace rat

namespace singleton

variables (n : ℕ+) [is_cyclotomic_extension {n} ℚ L]

lemma finrank : finrank ℚ L = (n : ℕ).totient := sorry

#print finrank

end singleton

end rat

namespace int

namespace singleton

variables (n : ℕ+)

instance : is_integral_closure (cyclotomic_ring n ℤ ℚ) ℤ (cyclotomic_field n ℚ) := sorry

end singleton

end int

end is_cyclotomic_extension

section int_facts

variables (p : ℕ+)


noncomputable theory

local notation `KK` := cyclotomic_field p ℚ

local notation `RR` := number_field.ring_of_integers (cyclotomic_field p ℚ)

--A.K.A theorem:FLT_facts 3
lemma flt_fact_3 [fact (p : ℕ).prime] (a : RR) :
  ∃ (n : ℤ), (a^(p : ℕ) - n) ∈ ideal.span ({p} : set RR) := sorry

/-- The principal ideal generated by `x + y ζ^i` for integer `x` and `y` -/
def flt_ideals (x y : ℤ) (i  : ℕ) : ideal RR :=
  ideal.span ({ x+y*(cyclotomic_ring.zeta p ℚ)^i} : set RR)

lemma flt_fact_2 [fact (p : ℕ).prime] (ph: 5 ≤ p) (x y : ℤ) (i j : ℕ) (h : i ≠ j)
  (hp : is_coprime x y) : (flt_ideals p x y i) + (flt_ideals p x y i) = ⊤ := sorry

end int_facts
